<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCA Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .result { margin-top: 20px; }
        .semester { margin-bottom: 20px; }
        .module { margin-bottom: 10px; }
        .module input { margin-right: 10px; }
        .chart-container { margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>QCA Calculator</h1>
        <form id="qca-form">
            <div id="semesters-container"></div>
            <button type="button" onclick="addSemester()">Add Semester</button>
            <button type="button" onclick="calculateQCA()">Calculate QCA</button>
        </form>
        <div class="result" id="result"></div>
        <div class="chart-container" id="chart-container">
            <canvas id="grade-chart"></canvas>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const grades = { A: 4, B: 3, C: 2, D: 1, F: 0 };
        const gradeColors = { A: '#66c2a5', B: '#fc8d62', C: '#8da0cb', D: '#e78ac3', F: '#a6d854' };
        let semesterCounter = 1;
        let gradesData = {};

        function addSemester() {
            const semesterDiv = document.createElement('div');
            semesterDiv.id = `semester-${semesterCounter}`;
            semesterDiv.classList.add('semester');
            semesterDiv.innerHTML = `
                <h2>Semester ${semesterCounter}</h2>
                <div id="modules-${semesterCounter}"></div>
                <input type="number" placeholder="Year (1-4)" id="year-${semesterCounter}" min="1" max="4" required />
                <button type="button" onclick="addModule(${semesterCounter})">Add Module</button>
            `;
            document.getElementById('semesters-container').appendChild(semesterDiv);
            semesterCounter++;
        }

        function addModule(semester) {
            const moduleDiv = document.createElement('div');
            const semesterId = `modules-${semester}`;
            const moduleCounter = document.getElementById(semesterId).children.length + 1;
            moduleDiv.id = `module-${semester}-${moduleCounter}`;
            moduleDiv.classList.add('module');
            moduleDiv.innerHTML = `
                <input type="text" placeholder="Module Name" id="module-name-${semester}-${moduleCounter}" />
                <input type="text" placeholder="Grade (A, B, C, D, F)" id="grade-${semester}-${moduleCounter}" />
                <input type="number" placeholder="Percentage (0-100)" id="percentage-${semester}-${moduleCounter}" min="0" max="100" />
                <input type="color" id="color-${semester}-${moduleCounter}" value="#000000">
            `;
            document.getElementById(semesterId).appendChild(moduleDiv);
        }

        async function saveGradeToNotion(year, grade, moduleName, percentage) {
            const response = await fetch('https://your-backend-server.com/save-grade', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ year, grade, moduleName, percentage })
            });
            if (!response.ok) {
 
